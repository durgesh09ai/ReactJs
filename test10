// Inside your ResearchStore
async fetchChatHistory(researchId: string, version: string) {
  this.loading = true;
  try {
    const response = await fetch(`${this.apiUrl}/research/${researchId}/history?version=${version}`);
    const data = await response.json();

    runInAction(() => {
      this.messages = data.messages || [];
      this.report = data.report || null;
      this.loading = false;
    });
  } catch (error) {
    runInAction(() => {
      this.error = "Failed to fetch chat history.";
      this.loading = false;
    });
    console.error("fetchChatHistory error", error);
  }
}


_______________________________________

useEffect(() => {
  if (version && researchId) {
    researchStore.fetchChatHistory(researchId, version);
  }
}, [version, researchId]);

__________________________
