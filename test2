resources: 
  repositories:
    - repository: genserve_ai_frt
      type: git
      name: HCTitan/genserve_ai_frt
      ref: 'refs/heads/main'
      trigger:
      - main


pool:
  vmImage: ubuntu-latest
steps:
- checkout: genserve_ai_frt
- task: Npm@1
  inputs:
    command: 'install'
- script: npm run build
  displayName: 'Build NextJs Application'
- task: CopyFiles@2
  inputs:
    Contents: '.next/**'
    TargetFolder: '$(Build.ArtifactStagingDirectory)'

- task: ArchiveFiles@2
  inputs:
    rootFolderOrFile: '$(Build.ArtifactStagingDirectory)/.next'
    includeRootFolder: false
    archiveType: 'zip'
    archiveFile: '$(Build.ArtifactStagingDirectory)/$(Build.BuildId).zip'
    replaceExistingArchive: true
