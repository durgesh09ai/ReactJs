import React from 'react';
import { Box, Stack, Typography } from '@mui/material';
import NavItem from './NavItem'; // Make sure this is your custom component

// ---- Types ---- //

type SubCategory = {
  id: string;
  count: number;
};

type SectionData = {
  id: string;
  SubCategoryList: Record<string, SubCategory>;
};

type SidebarData = Record<string, SectionData>;

interface SidebarProps {
  sidebarData: SidebarData;
  collapsed: boolean;
}

// ---- Component ---- //

const Sidebar: React.FC<SidebarProps> = ({ sidebarData, collapsed }) => {
  return (
    <Box width={collapsed ? '64px' : '240px'} bgcolor="#f5f5f5" height="100vh" p={1}>
      <Stack spacing={2}>
        {Object.entries(sidebarData).map(([sectionLabel, sectionData]) => (
          <NavItem
            key={sectionData.id}
            icon="./menuIcon.svg"
            label={sectionLabel}
            collapsed={collapsed}
            subItems={Object.entries(sectionData.SubCategoryList).map(([subLabel, subData]) => ({
              label: subLabel,
              count: subData.count,
              href: `/sub/${subData.id}`,
            }))}
          />
        ))}
      </Stack>
    </Box>
  );
};

export default Sidebar;
