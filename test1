import React from "react";
import {
  FormControl,
  InputLabel,
  Select,
  MenuItem,
  ListSubheader
} from "@mui/material";

const Dropdown = ({ data }) => {
  const [selected, setSelected] = React.useState("");

  const handleChange = (event) => {
    setSelected(event.target.value);
  };

  const renderOptions = () => {
    const options = [];

    Object.entries(data).forEach(([lobName, lobObj]) => {
      const subCategories = lobObj.SubCategoryList;

      Object.entries(subCategories).forEach(([subCatName, subCatObj]) => {
        const subheaderKey = `${lobName} - ${subCatName}`;
        options.push(
          <ListSubheader key={subheaderKey}>
            {subCatName}
          </ListSubheader>
        );

        subCatObj.SubCategoryTypeList.forEach((type) => {
          options.push(
            <MenuItem key={type.id} value={type.id}>
              {type.name}
            </MenuItem>
          );
        });
      });
    });

    return options;
  };

  return (
    <FormControl fullWidth>
      <InputLabel>Select Type</InputLabel>
      <Select
        value={selected}
        label="Select Type"
        onChange={handleChange}
      >
        {renderOptions()}
      </Select>
    </FormControl>
  );
};

export default Dropdown;
