import React, { useState } from "react";
import {
  Paper,
  Box,
  Typography,
  IconButton,
  Menu,
  MenuItem,
} from "@mui/material";
import MoreVertIcon from "@mui/icons-material/MoreVert";
import EditIcon from "@mui/icons-material/Edit";
import DeleteIcon from "@mui/icons-material/Delete";
import SetupHeader from "./SetupHeader";

export const SolutionPanel: React.FC = () => {
  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);

  const handleClick = (event: React.MouseEvent<HTMLElement>) => {
    setAnchorEl(event.currentTarget);
  };

  const handleClose = () => {
    setAnchorEl(null);
  };

  const isMenuOpen = Boolean(anchorEl);

  const columnTitles = [
    "Column 1",
    "Column 2",
    "Column 3",
    "Column 4",
    "Column 5",
    "Column 6",
    "Actions",
  ];

  return (
    <Paper elevation={1} sx={{ maxWidth: "820px", pb: "20px", px: 1, borderRadius: 1 }}>
      <SetupHeader title="My Solution" />

      <Box sx={{ display: "flex", flexDirection: "column", justifyContent: "center" }}>
        <Paper
          elevation={0}
          sx={{
            border: "1px solid rgba(18,18,21,0.10)",
            padding: 2,
            width: "100%",
          }}
        >
          {/* Header Row */}
          <Box
            sx={{
              display: "grid",
              gridTemplateColumns: "repeat(7, 1fr)",
              alignItems: "center",
              gap: 2,
              mb: 1,
            }}
          >
            {columnTitles.map((title, index) => (
              <Typography
                key={index}
                variant="subtitle2"
                sx={{ color: "primary.main", fontWeight: 600 }}
              >
                {title}
              </Typography>
            ))}
          </Box>

          {/* Sample Data Row */}
          <Box
            sx={{
              display: "grid",
              gridTemplateColumns: "repeat(7, 1fr)",
              alignItems: "center",
              gap: 2,
            }}
          >
            {[...Array(6)].map((_, index) => (
              <Typography key={index}>Data {index + 1}</Typography>
            ))}

            {/* Action column */}
            <Box sx={{ display: "flex", justifyContent: "flex-start" }}>
              <IconButton
                size="small"
                onClick={handleClick}
                sx={{ "&:hover": { backgroundColor: "transparent" } }}
              >
                <MoreVertIcon />
              </IconButton>

              <Menu
                anchorEl={anchorEl}
                open={isMenuOpen}
                onClose={handleClose}
                anchorOrigin={{ vertical: "bottom", horizontal: "right" }}
                transformOrigin={{ vertical: "top", horizontal: "right" }}
              >
                <MenuItem onClick={handleClose}>
                  <EditIcon fontSize="small" sx={{ mr: 1 }} /> Edit
                </MenuItem>
                <MenuItem onClick={handleClose}>
                  <DeleteIcon fontSize="small" sx={{ mr: 1 }} /> Delete
                </MenuItem>
              </Menu>
            </Box>
          </Box>
        </Paper>
      </Box>
    </Paper>
  );
};
